{% extends "cfd/base.html" %}
{% load static %}
{% block link %}
	<link rel="stylesheet" href="{% static 'cfd/style/table.css' %}" type="text/css">
{% endblock link %}

{% block content %}
  <main class="container flex-shrink-0">
    <div class="p-5 rounded">
	  <p class="lead">Calculate take profit & stop loss</p>
      <div class="row">
		  <div class="col-md-4">
			<form action="{% url 'cfd:calc_set' %}" method="post" class="row g-3">
			  {% csrf_token %}
			  <div class="col-md-6 input-group-sm">
				  <input type="number" step="1" name="margin_value" value="{{ margin_value }}" class="form-control">
				<label for="margin_value" class="year-sm-text">Margin value</label>
			  </div>
			  <div class="col-md-6 input-group-sm">
				<input type="number" step="0.01" name="pip_value" value="{{ pip_value|floatformat:"2" }}" class="form-control">
				<label for="pip_value" class="year-sm-text">Pip value</label>
			  </div>
			  <div class="col-md-6 input-group-sm">
				<input type="number" step="1" name="gap" value="{{ gap }}" class="form-control">
				<label for="gap" class="year-sm-text">Gap</label>
			  </div>
			  <div class="col-md-6 input-group-sm">
				<input type="number" step="0.01" name="lot" value="{{ lot|floatformat:"2" }}" class="form-control">
				<label for="lot" class="year-sm-text">Lot size</label>
			  </div>
			  <div class="col-12 input-group-sm">
				<input type="number" step="1" name="tp_buy" value="{{ tp_buy|safe }}" class="form-control">
				<label for="tp_buy" class="year-sm-text">Take Profit</label>
			  </div>
			  <div class="form-check">
				  <input class="form-check-input" type="radio" name="buy_or_sell" id="" checked>
				  <label class="form-check-label" for="buy_or_sell">
					Buy
				  </label>
			  </div>
			  <div class="form-check">
				  <input class="form-check-input" type="radio" name="buy_or_sell" id="" >
				  <label class="form-check-label" for="buy_or_sell">
					Sell
				  </label>
			  </div>
<!-- <div class="form-check"> -->
<!--   <input class="form-check-input" type="checkbox" value="" id="checkbox" name="buy_or_sell"> -->
<!--   <label class="form-check-label" for="flexCheckDefault"> -->
<!--     Default checkbox -->
<!--   </label> -->
<!-- </div> -->
			  <div class="col-12 input-group-sm text-center">
				<button type="submit" class="btn btn-outline-secondary btn-sm">Set</button>
			  </div>

			</form>
			<div class="row">
				<div class="col-md-12">
					<p class="lead mt-4">Profit: 
					{% if sum_profit > 0 %}
					  <span class="text-success">{{ sum_profit|floatformat:"2" }}</span>
					{% else %}
					  <span class="text-danger">{{ sum_profit|floatformat:"2" }}</span>
					{% endif %}
					</p>
				</div>
			</div>
		  </div> <!-- col-md -->
		  <div class="col-md-8">

			<form action="{% url 'cfd:calc_buy_create' %}" method="post" class="">
			  {% csrf_token %}
			  <div class="ncard border-info mb-1" style="max-width: 18rem;">
				<div class="card-header">Set trade levels</div>
				  <div class="card-body">
					  <div class="col-md-4">
						<table class="table table-sm">
						  <thead>
							<tr>
							  <th scope="col">Profit:</th>
							  <th scope="col">Levels:</th>
							  <th scope="col"></th>
							</tr>
						  </thead>
						  <tbody>
							  {% for buy_l in buy_zip %}
							<tr>
							  <td>{{ buy_l.0|floatformat:"2" }}</td>
							  <td>{{ buy_l.1.1 }}</td>
							  <td>
								  <a href="{% url 'cfd:calc_buy_delete' buy_l.1.0 %}">
									  <i class="bi bi-trash text-danger ml-4" 
										  data-bs-toggle="tooltip" 
										  data-bs-placement="top" title="Delete"></i>
								  </a>
							  </td>
							</tr>
							{% endfor %}
						  </tbody>
						</table>
					  </div>

					  <div class="col-md-12 input-group-sm">
						<input type="number" step="1" name="buy_level" value="" class="form-control">
						<label for="buy_level" class="year-sm-text">Buy Level</label>
					  </div>
					  <div class="col-12 input-group-sm text-center">
						<button type="submit" class="btn btn-outline-info btn-sm">Set</button>
					  </div>
				  </div>
				</div>
			  </div>
			</form>
		  
		  </div> <!-- col-md -->
      </div> <!-- row -->

	</div><!-- p-5 rounded -->
  </main>
{% include "cfd/footer.html" %}
{% endblock content %}
